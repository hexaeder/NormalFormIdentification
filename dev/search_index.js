var documenterSearchIndex = {"docs":
[{"location":"generated/droop_identification/#Droop-Identification-Example","page":"Droop Identification","title":"Droop Identification Example","text":"","category":"section"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"using NormalFormIdentification\nusing NetworkDynamics\nusing PowerDynamics\nusing PowerDynamics.Library\nusing CairoMakie\nusing ModelingToolkit\nusing ModelingToolkit: t_nounits as t, D_nounits as Dt","category":"page"},{"location":"generated/droop_identification/#Basic-droop-inverter-model","page":"Droop Identification","title":"Basic droop inverter model","text":"","category":"section"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"@mtkmodel DroopInverter begin\n    @components begin\n        terminal = Terminal()\n    end\n    @parameters begin\n        Pset, [description=\"Wirkleistungs-Sollwert\", guess=1]\n        Qset, [description=\"Blindleistungs-Sollwert\", guess=0]\n        Vset, [description=\"Spannungs-Sollwert\", guess=1]\n        ω₀=0, [description=\"Nennfrequenz\"]\n        Kp=1.0, [description=\"Wirkleistungs-Droop-Koeffizient\"]\n        Kq=1.0, [description=\"Blindleistungs-Droop-Koeffizient\"]\n        τ = 1.0, [description=\"Zeitkonstante des Leistungsfilters\"]\n    end\n    @variables begin\n        Pmeas(t), [description=\"Wirkleistungsmessung\", guess=1]\n        Qmeas(t), [description=\"Blindleistungsmessung\", guess=0]\n        Pfilt(t), [description=\"Gefilterte Wirkleistung\", guess=1]\n        Qfilt(t), [description=\"Gefilterte Blindleistung\", guess=1]\n        ω(t)=1, [description=\"Frequenz\"]\n        δ(t)=0, [description=\"Spannungswinkel\", guess=0]\n        V(t)=1, [description=\"Spannungsbetrag\"]\n    end\n    @equations begin\n        Pmeas ~  terminal.u_r*terminal.i_r + terminal.u_i*terminal.i_i\n        Qmeas ~ -terminal.u_r*terminal.i_i + terminal.u_i*terminal.i_r\n        τ * Dt(Pfilt) ~ Pmeas - Pfilt\n        τ * Dt(Qfilt) ~ Qmeas - Qfilt\n        ω ~ ω₀ - Kp * (Pfilt - Pset) ## Frequenz senken, wenn P höher als Sollwert\n        V ~ Vset - Kq * (Qfilt - Qset) ## Spannung senken, wenn Q höher als Sollwert\n        Dt(δ) ~ ω - ω₀\n        terminal.u_r ~ V*cos(δ)\n        terminal.u_i ~ V*sin(δ)\n    end\nend;\nnothing #hide","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"Build the bus model","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"@named inverter = DroopInverter()\nmtkbus = MTKBus(inverter)\nvm = Bus(mtkbus)\nnothing #hide","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"in order to get the LTI we need to initialize the system","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"set_default!(vm, :busbar₊u_r, 1.0)\nset_default!(vm, :busbar₊u_i, 0.0)\nset_default!(vm, :busbar₊i_r, -1.0)\nset_default!(vm, :busbar₊i_i, 0.0)\ninitialize_component!(vm)","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"Now we have a fully initialzied model and can inspectit further","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"print_equations(vm; remove_ns=[:inverter])","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"print_linearization(vm)","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"Next we can generate the bode plots for","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"G(s) = C  left(sM -Aright)^-1B","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"bode_plot(get_LTI(vm).G)","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"Also the slighly adapted Gs","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"G_s(s) = scdot G(s) = s cdot C  left(sM -Aright)^-1B","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"bode_plot(get_LTI(vm).Gs)","category":"page"},{"location":"generated/droop_identification/#Droop-Inverter-behind-resistance","page":"Droop Identification","title":"Droop Inverter behind resistance","text":"","category":"section"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"@mtkmodel DroopInverterResistance begin\n    @components begin\n        terminal = Terminal()\n    end\n    @parameters begin\n        Pset, [description=\"Wirkleistungs-Sollwert\", guess=1]\n        Qset, [description=\"Blindleistungs-Sollwert\", guess=0]\n        Vset, [description=\"Spannungs-Sollwert\", guess=1]\n        ω₀=0, [description=\"Nennfrequenz\"]\n        Kp=1.0, [description=\"Wirkleistungs-Droop-Koeffizient\"]\n        Kq=1.0, [description=\"Blindleistungs-Droop-Koeffizient\"]\n        τ = 1.0, [description=\"Zeitkonstante des Leistungsfilters\"]\n        R = 1, [description=\"Widerstand der internen Impedanz\", guess=1]\n    end\n    @variables begin\n        Pmeas(t), [description=\"Wirkleistungsmessung\", guess=1]\n        Qmeas(t), [description=\"Blindleistungsmessung\", guess=0]\n        Pfilt(t), [description=\"Gefilterte Wirkleistung\", guess=1]\n        Qfilt(t), [description=\"Gefilterte Blindleistung\", guess=1]\n        ω(t)=1, [description=\"Frequenz\"]\n        δ(t)=0, [description=\"Spannungswinkel\", guess=0]\n        V(t)=1, [description=\"Spannungsbetrag\"]\n        u_r(t), [description=\"Spannung intern\", guess=1]\n        u_i(t), [description=\"Spannung intern\", guess=0]\n    end\n    @equations begin\n        terminal.i_r ~ (u_r - terminal.u_r) / R\n        terminal.i_i ~ (u_i - terminal.u_i) / R\n        Pmeas ~  u_r*terminal.i_r + u_i*terminal.i_i\n        Qmeas ~ -u_r*terminal.i_i + u_i*terminal.i_r\n        τ * Dt(Pfilt) ~ Pmeas - Pfilt\n        τ * Dt(Qfilt) ~ Qmeas - Qfilt\n        ω ~ ω₀ - Kp * (Pfilt - Pset) ## Frequenz senken, wenn P höher als Sollwert\n        V ~ Vset - Kq * (Qfilt - Qset) ## Spannung senken, wenn Q höher als Sollwert\n        Dt(δ) ~ ω - ω₀\n        u_r ~ V*cos(δ)\n        u_i ~ V*sin(δ)\n    end\nend;\nnothing #hide","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"Now let's build and analyze this model with internal resistance.","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"@named inverter = DroopInverterResistance()\nmtkbus = MTKBus(inverter)\nvm = Bus(mtkbus)\nset_default!(vm, :busbar₊u_r, 1.0)\nset_default!(vm, :busbar₊u_i, 0.0)\nset_default!(vm, :busbar₊i_r, -1.0)\nset_default!(vm, :busbar₊i_i, 0.0)\ninitialize_component!(vm)","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"Let's examine the equations and linearization of this model:","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"print_equations(vm; remove_ns=[:inverter])","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"print_linearization(vm)","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"Next we can generate the bode plots for","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"G(s) = C  left(sM -Aright)^-1B","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"bode_plot(get_LTI(vm).G)","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"Also the slighly adapted Gs","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"G_s(s) = scdot G(s) = s cdot C  left(sM -Aright)^-1B","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"bode_plot(get_LTI(vm).Gs)","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"","category":"page"},{"location":"generated/droop_identification/","page":"Droop Identification","title":"Droop Identification","text":"This page was generated using Literate.jl.","category":"page"},{"location":"#NormalFormIdentification","page":"Home","title":"NormalFormIdentification","text":"","category":"section"}]
}
